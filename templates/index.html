    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Kulakan</title>

        <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet"> 
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">      
        <link rel="stylesheet" href="{{ url_for('static', filename='css/homestyle.css') }}">
    </head>
    <body>
        <header>
            <div class="logo">Kulakan.</div>
            <nav>
                <a href="{{ url_for('home') }}">Home</a>
                <a href="{{ url_for('menuproduk') }}">Produk</a>
                <div class="dropdown">
                    <a href="#">Pesanan</a>
                    <ul class="dropdown-menu">
                        <li><a href="{{ url_for('keranjang') }}">Keranjang</a></li>
                        <li><a href="{{ url_for('riwayat') }}">Riwayat</a></li>
                    </ul>
                </div>
                <a href="{{ url_for('setting') }}">Setting</a>
            </nav>
            
            <div class="profile-logo">
                <div class="profile-logo">
                    <p class="user-name">{{ user.name }}</p>
                    <img class="profile-photo" src="{{ url_for('static', filename='profile_photos/' + user.profile_photo) }}" alt="Profile Logo" onclick="window.location.href='{{ url_for('profile_settings') }}'">
                </div>
            </div>
            

        </header>

        <section class="hero">
            <img src="{{ url_for('static', filename='asset/image/bg.jpg') }}" alt="Hero Background" class="hero-background">
            <div class="hero-text">
                <h1>Kulak Sembako<br>Mudah, Cepat, dan<br>Terpercaya</h1>
                <p>Semua Kebutuhan Harian Anda, Langsung<br>
                    di Depan Pintu!</p>
            </div>
            <div class="hero-image">
                <img src="{{ url_for('static', filename='asset/image/cart.png') }}" alt="Cartbg">
            </div>
        </section>
        


        <section class="trending-products">
            <h2>Paling Banyak Dicari</h2>
            <div class="product-grid">
                <div class="product-item">                
                    <img src="{{ url_for('static', filename='asset/image/beras.jpg') }}" alt="Cartbg">
                </div>
                <div class="product-item">
                    <img src="{{ url_for('static', filename='asset/image/minyak1.jpg') }}" alt="Cartbg">
                    
                </div>
                <div class="product-item">
                    <img src="{{ url_for('static', filename='asset/image/download.jpg') }}" alt="Cartbg">
                
                </div>
                <div class="product-item">
                    <img src="{{ url_for('static', filename='asset/image/gula.jpg') }}" alt="Cartbg">
                    
                </div>
            </div>
            <div class="description">
                <div class="image-placeholder"></div>
                <div class="text-content">
                    <h3> PROMO SPESIAL!</h3>
                    <p>Hanya untuk waktu terbatas, nikmati harga lebih terjangkau untuk pembelian tepung Segitiga Biru di toko kami dan berbagai platform belanja online! Jangan lewatkan penawaran menarik ini untuk stok tepung segar yang akan mempermudah setiap persiapan masakan atau kue Anda.</p>
                </div>
            </div>
            
        </section>
        

        <section class="promotion">
            <div class="promotion-text">
                <h2>Penawaran Terbatas</h2>
            </div>
            <div class="promotion-offers">
                <div class="offer-item">
                    <img src="{{ url_for('static', filename='asset/image/beras1.jpg') }}" alt="Cartbg">
                    <div class="offer-text">Diskon 15%</div>
                </div>
                <div class="offer-item">
                    <img src="{{ url_for('static', filename='asset/image/minyak.jpg') }}" alt="Cartbg">
                    <div class="offer-text">Gratis<br>Ongkir</div>
                </div>
                <div class="offer-item">
                    <img src="{{ url_for('static', filename='asset/image/tepung.jpg') }}" alt="Cartbg">
                    <div class="offer-text">Beli 1<br>Gratis 1</div>
                </div>
            </div>
        </section>
        
        
        <section class="limited-offer">
            <div class="text-box">
                <h2>Qoute of the day</h2>
                <p>"Menghubungkan usaha kecil dengan peluang besar,</p>
                <p>satu sembako di setiap langkah.".</p>
                <h3>-Founder Kulakan.</h3>
            </div>
            <div class="image-box"></div>
        </section>
        
    <!-- Bagian Blog -->
    <section class="blog">
        <div class="blog-title">
            <h2>Artikel Terbaru</h2>
            <p>Temukan informasi terbaru dan tips menarik seputar produk dan layanan kami.</p>
        </div>
        <div class="blog-content">
            <article class="blog-post">
                <h3>Tips Memilih Beras Berkualitas</h3>
                <p>Beras adalah bahan pokok utama. Dalam artikel ini, kami akan memberikan tips untuk memilih beras yang berkualitas agar Anda bisa menyajikan hidangan terbaik untuk keluarga.</p>
                <a href="https://www.rri.co.id/lain-lain/975883/cara-memilih-beras-yang-baik-untuk-dikonsumsi#:~:text=Beras%20seharusnya%20bersih%20dan%20bebas,menunjukkan%20kualitas%20yang%20kurang%20baik.&text=Kemasan%3A%20Pastikan%20kemasan%20dalam%20kondisi%20baik%2C%20tanpa%20robekan%20atau%20kerusakan.">Baca Selengkapnya</a>
            </article>
            <article class="blog-post">
                <h3>Manfaat Minyak Kelapa untuk Kesehatan</h3>
                <p>Minyak kelapa memiliki banyak manfaat untuk kesehatan. Temukan informasi lengkap mengenai manfaat dan cara penggunaan minyak kelapa dalam kehidupan sehari-hari.</p>
                <a href="https://www.alodokter.com/minyak-kelapa-sebagai-penyubur-rambut-itu-mitos">Baca Selengkapnya</a>
            </article>
            <article class="blog-post">
                <h3>Kelebihan Tepung Terigu Organik</h3>
                <p>Tepung terigu organik menjadi pilihan yang lebih sehat. Pelajari lebih lanjut mengenai manfaat tepung terigu organik dalam artikel ini.</p>
                <a href="https://www.astahomeware.com/mengenal-tepung-terigu-kegunaan-dan-perbedaannya/?srsltid=AfmBOootnAMimwy1j1to4U6_YtZ-mgc736IL_9y8cv-Luf6MWH_eNApA">Baca Selengkapnya</a>
            </article>
        </div>
    </section>

    <!-- Bagian Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section about">
                <h2>Kulakan</h2>
                <p>Tugas Capstone 2024</p>
                <p>Moh Fariz - 22090091</p>
                <p>Reyhan Uegene Sayhputra - 22090129</p>
                <p>Mohamad Farhan Mukharom - 22090075</p>
                <p>Hafidz Rahmatullah - 22090133</p>
            </div>
            <div class="footer-section links">
                <h3>Links</h3>
                <ul>
                    <li><a href="#">Tentang Kami</a></li>
                    <li><a href="#">Layanan</a></li>
                    <li><a href="#">Kontak</a></li>
                    <li><a href="#">FAQ</a></li>
                </ul>
            </div>
            <div class="footer-section contact-form">
                <h3>Tanggapan anda</h3>
                <form id="review-form" action="#" method="post">
                    <!-- Your form fields here -->
                    <textarea id="reviewText" name="reviewText"></textarea>
                    <button type="submit" id="submitButton">Submit Review</button>
                </form>
                
                <!-- <ul id="reviews-list"></ul> -->
                
                <!-- <form action="#" method="post">
                    <div class="mb-3">
                        <label for="reviewText" class="form-label">Write Your Review:</label>
                        <textarea class="form-control" id="reviewText" rows="4" placeholder="Share your experience..." required></textarea>
                    </div>
                    <button type="submit" class="btn btn-submit" id="submitButton">Submit Review</button>
                    <input type="email" name="email" placeholder="Email Anda">
                    <textarea name="message" placeholder="Pesan Anda"></textarea>
                    <button type="submit">Kirim</button>
                </form>  -->
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Kulakan. Semua Hak Cipta Dilindungi.</p>
        </div>
    </footer>
    <!-- chatbot -->
    <div class="chatbox">
            <div class="chatbox__support">
                <div class="chatbox__header">
                    <div class="chatbox__image--header">
                        <img src="{{ url_for('static', filename='image/pandas.png') }}" alt="Panda">
                    </div>
                    <div class="chatbox__content--header">
                        <h4 class="chatbox__heading--header">Si Panda</h4>
                        <p class="chatbox__description--header">Hi. Ada yang bisa saya bantu?</p>
                    </div>
                </div>
                <div class="chatbox__messages chat-messages">
                    <!-- Pesan akan ditambahkan di sini -->
                </div>
                <div class="chatbox__footer">
                    <input id="user-input" type="text" placeholder="Tulis pesan...">
                    <button id="send-btn" class="chatbox__send--footer">Kirim</button>
                </div>
            </div>
            <div class="chatbox__button">
                <button><img src="{{ url_for('static', filename='image/Frame.png') }}" alt="Button"></button>
            </div>
        </div>

<script>
    class Chatbox {
    constructor() {
        this.args = {
            openButton: document.querySelector('.chatbox__button'),
            chatBox: document.querySelector('.chatbox__support'),
            sendButton: document.querySelector('#send-btn'), // Ganti dengan ID baru
            inputField: document.querySelector('#user-input'), // Ganti dengan ID baru
            chatMessages: document.querySelector('.chat-messages'), // Tambahkan elemen baru
        };

        this.state = false;
        this.messages = []; // Menyimpan pesan
    }

    display() {
        const { openButton, chatBox, sendButton, inputField } = this.args;

        // Event untuk membuka dan menutup chatbox
        openButton.addEventListener('click', () => this.toggleState(chatBox));

        // Event untuk tombol kirim
        sendButton.addEventListener('click', () => this.onSendButton());

        // Event untuk tombol "Enter" pada input field
        inputField.addEventListener('keyup', ({ key }) => {
            if (key === 'Enter') {
                this.onSendButton();
            }
        });
    }

    toggleState(chatbox) {
        this.state = !this.state;

        // Tampilkan atau sembunyikan chatbox
        if (this.state) {
            chatbox.classList.add('chatbox--active');
        } else {
            chatbox.classList.remove('chatbox--active');
        }
    }

    onSendButton() {
        const { inputField, chatMessages } = this.args;
        const userMessage = inputField.value.trim();

        if (!userMessage) return; // Jangan kirim pesan kosong

        // Tambahkan pesan pengguna ke UI
        this.addMessageToChatbox(chatMessages, 'User', userMessage);

        // Kirim pesan ke API chatbot
        fetch('/api/chatbot', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ message: userMessage }),
        })
            .then((response) => {
                if (!response.ok) {
                    throw new Error(HTTP error! status: ${response.status});
                }
                return response.json();
            })
            .then((data) => {
                const botResponse = data.response || 'Maaf, terjadi kesalahan pada server.';
                this.addMessageToChatbox(chatMessages, 'Si Panda', botResponse, true);
                inputField.value = ''; // Kosongkan input pengguna
            })
            .catch((error) => {
                console.error('Error:', error);
                this.addMessageToChatbox(chatMessages, 'Si Panda', 'Maaf, tidak dapat terhubung ke server.', true);
                inputField.value = ''; // Kosongkan input pengguna
            });
    }

    addMessageToChatbox(chatMessages, sender, message, isBot = false) {
        if (isBot) {
            // Tambahkan pesan bot dengan avatar
            const botMessageElement = document.createElement('div');
            botMessageElement.classList.add('message');
            botMessageElement.innerHTML = `  
                <div class="message received">
                    <p>${message}</p>
                </div>`;
            chatMessages.appendChild(botMessageElement);
        } else {
            // Tambahkan pesan pengguna
            const userMessageElement = document.createElement('div');
            userMessageElement.classList.add('message', 'sent');
            userMessageElement.innerHTML = <p>${message}</p>;
            chatMessages.appendChild(userMessageElement);
        }

        // Scroll otomatis ke bagian bawah
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }
    
}

// Inisialisasi class Chatbox
const chatbox = new Chatbox();
chatbox.display();
</script>
    <!-- chatbot -->
     
    </body>
    </html>